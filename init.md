

# 英文5文型トレーニングアプリ 仕様書（簡易）

## 1. 目的

* ユーザーが英文を見た瞬間に **第1〜第5文型を判定**できるようにする。
* 暗記ではなく、**V（動詞）と要素（O/C）の有無**で機械的に判定できる状態を作る。

## 2. 対象ユーザー

* 英文法初級〜中級（中学〜TOEIC600程度を想定）
* 「読めるけど文型が曖昧」「第4/第5が特に苦手」

## 3. 用語・判定ルール（アプリ内基準）

* **S/V/O/C/M**（M=修飾語：副詞句、前置詞句など。文型判定には原則含めない）
* 文型は以下で判定する：

  * 第1：SV（Oなし、Cなし）
  * 第2：SVC（Cあり）
  * 第3：SVO（Oが1つ）
  * 第4：SVOO（Oが2つ）
  * 第5：SVOC（Oの後にC）

## 4. 提供機能（MVP）

### 4.1 学習モード

1. **文型スナイパー（瞬間判定クイズ）**

* 1問ずつ英文を表示し、ユーザーは「第1〜第5」ボタンで回答
* 制限時間：デフォルト **2.0秒/問**（設定で変更可）
* 連続正解でコンボ、ミスでコンボリセット

2. **パーツ分解（S/V/O/Cタグ付け）**

* 英文に対し、Vをまず選択 → 次にO/Cを選択（タップ選択式）
* 選択結果から自動で文型判定し、正解/誤答を返す
* 初心者向けの「遅いけど確実」モード

### 4.2 結果・復習

* セッション結果：正答率、平均回答時間、文型別正答率、ミス傾向（例：第4↔第5）
* **弱点復習デッキ**：直近で間違えた問題・混同した文型を優先出題

### 4.3 基本設定

* 制限時間（例：1.5/2.0/3.0秒）
* 出題範囲（第1〜第5のどれを含めるか）
* 難易度（短文/長文、修飾語ノイズ有無）

## 5. 画面一覧（MVP）

1. **ホーム**

* 「瞬間判定」「分解」「弱点復習」「設定」導線
* 今日の学習状況（連続学習日数、今日の正答率）

2. **瞬間判定画面**

* 英文表示エリア
* 回答ボタン（第1〜第5）
* タイマー、コンボ表示
* 回答後に0.8秒程度のフィードバック表示（正誤 + ワンライン解説）

3. **分解画面**

* 英文表示
* 選択ステップ（V → O → C）
* 判定結果と解説（短く）

4. **結果画面**

* セッション統計
* 「間違いだけ復習」ボタン

5. **設定画面**

* 4.3の設定項目

## 6. 問題データ仕様（例）

### 6.1 問題（Question）

* id: string
* sentence: string（英文）
* level: 1..5（難易度）
* correctPattern: 1..5（文型）
* tokens（任意/MVPでは省略可）: 単語分割
* answerKey（任意）:

  * verbSpan: [start, end]
  * objectSpans: [[start,end]...]
  * complementSpans: [[start,end]...]
* explanationShort: string（20〜40文字程度の要点）
* tags: string[]（例：["SVOO","give","preposition-noise"]）

### 6.2 出題ログ（UserAnswer）

* questionId
* chosenPattern
* isCorrect
* responseTimeMs
* mode（sniper / parse）
* createdAt

## 7. 出題ロジック（MVP）

* 基本はランダムだが、ユーザー履歴により重み付け
* 重み付け例：

  * 直近7日で誤答が多い文型を優先
  * **混同ペア**（第4↔第5、第2↔第3）を優先
  * 連続で同一文型が出すぎないように制御

## 8. フィードバック文（MVPの型）

* 正解時：`正解：第X文型（S V O ...）`
* 誤答時：`誤り：Oの数/ Cの有無に注目`
* ワンライン解説はテンプレ化：

  * 第2：`C(補語)がある → SVC`
  * 第4：`目的語が2つ → SVOO`
  * 第5：`Oの後ろがC → SVOC`

## 9. 非機能要件（最低限）

* 反応速度：回答タップから判定表示まで **100ms〜200ms目標**
* オフライン：問題データは端末キャッシュ（最低でも直近学習は可能）
* データ：ユーザー履歴は端末保存（将来クラウド同期は拡張）

## 10. 将来拡張（MVP後）

* **動詞図鑑（Vカード）**：動詞ごとの典型文型・用例収集
* ストア配布、プッシュ通知（学習リマインド）
* 実文（ニュース/歌詞/会話）からの抽出問題
* 文章解析の自動ヒント（ただし誤判定もあるので“補助”扱い）

---

## MVPの完成条件（受け入れ基準）

* 50〜100問の問題データで、瞬間判定と分解の2モードが動く
* 学習結果が保存され、弱点復習が機能する
* 文型別正答率が見える（少なくとも第4/第5の混同が可視化できる）

